{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Desktop/application/EFrontend/src/Login/Login.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport Header from '../Home/Header';\nimport { useNavigate } from 'react-router-dom';\nimport \"./Login.css\";\nimport Footer2 from '../Home/Footer2';\nimport { useTranslation } from 'react-i18next';\nimport { useApi } from '../hooks/useApi';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  const {\n    t\n  } = useTranslation();\n  const [formData, setFormData] = useState({\n    email: '',\n    password: ''\n  });\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const navigate = useNavigate();\n  const {\n    post\n  } = useApi();\n  const handleChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n    setError(''); // Clear error when user types\n    setSuccess(''); // Clear success when user types\n  };\n  const handleLogin = async e => {\n    e.preventDefault();\n    setError('');\n    setSuccess('');\n\n    // First, check if instructor\n    try {\n      const instructorRes = await post('http://localhost:5001/api/instructor-login', formData, 'Logging in...');\n      if (instructorRes && instructorRes.isInstructor) {\n        setSuccess('Instructor login successful!');\n        localStorage.setItem('isInstructor', 'true');\n        localStorage.setItem('isLoggedIn', 'true');\n        localStorage.setItem('instructorEmail', formData.email); // Save instructor email\n        localStorage.setItem('userEmail', formData.email); // Save user email for booking\n        localStorage.setItem('userId', instructorRes.instructorId); // Store instructorId as userId for slot page\n        setTimeout(() => navigate('/slots'), 1500);\n        return;\n      }\n    } catch (err) {\n      // Not an instructor, continue to user/admin login\n    }\n    try {\n      const data = await post('http://localhost:5001/api/login', formData, 'Logging in...');\n      localStorage.setItem('userId', data.userId); // Store userId for booking\n      const normalizedPackage = (data.package || \"free\").toLowerCase().replace(\" plan\", \"\").trim();\n      localStorage.setItem(\"package\", normalizedPackage);\n      if (formData.email === \"admin1234@gmail.com\" && formData.password === \"admin1234\") {\n        setSuccess(\"Admin login successful!\");\n        localStorage.setItem(\"isAdmin\", \"true\");\n        localStorage.setItem(\"isLoggedIn\", \"true\");\n        localStorage.setItem('userEmail', formData.email); // Save user email for booking\n        setTimeout(() => navigate('/Articles'), 1500);\n      } else {\n        localStorage.setItem(\"isAdmin\", \"false\");\n        localStorage.setItem(\"isLoggedIn\", \"true\");\n        setSuccess('Login successful!');\n        localStorage.setItem('userEmail', formData.email); // Save user email for booking\n        setTimeout(() => navigate('/'), 1500);\n      }\n    } catch (err) {\n      console.error(err);\n      setError(err.message || 'Error logging in.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"upperheader\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"uuy\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          id: \"form\",\n          onSubmit: handleLogin,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: t(\"login.title\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 11\n          }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: 'red',\n              marginBottom: '10px',\n              textAlign: 'center'\n            },\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 23\n          }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: 'green',\n              marginBottom: '10px',\n              textAlign: 'center'\n            },\n            children: success\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"ineerf\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [t(\"login.email\"), \" :\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              name: \"email\",\n              value: formData.email,\n              onChange: handleChange,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"ineerf\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [t(\"login.password\"), \" :\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              name: \"password\",\n              value: formData.password,\n              onChange: handleChange,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            children: t(\"login.submit\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer2, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(Login, \"kco9DDPjUZ3I28qj/w1KgQEFfN8=\", false, function () {\n  return [useTranslation, useNavigate, useApi];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","Header","useNavigate","Footer2","useTranslation","useApi","jsxDEV","_jsxDEV","Fragment","_Fragment","Login","_s","t","formData","setFormData","email","password","error","setError","success","setSuccess","navigate","post","handleChange","e","target","name","value","handleLogin","preventDefault","instructorRes","isInstructor","localStorage","setItem","instructorId","setTimeout","err","data","userId","normalizedPackage","package","toLowerCase","replace","trim","console","message","children","id","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","style","color","marginBottom","textAlign","type","onChange","required","_c","$RefreshReg$"],"sources":["/Users/mac/Desktop/application/EFrontend/src/Login/Login.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport Header from '../Home/Header';\nimport { useNavigate } from 'react-router-dom';\nimport \"./Login.css\";\nimport Footer2 from '../Home/Footer2';\nimport { useTranslation } from 'react-i18next';\nimport { useApi } from '../hooks/useApi';\n\nconst Login = () => {\n  const { t } = useTranslation();\n  const [formData, setFormData] = useState({ email: '', password: '' });\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const navigate = useNavigate();\n  const { post } = useApi();\n\n  const handleChange = (e) => {\n    setFormData({ \n      ...formData, \n      [e.target.name]: e.target.value \n    });\n    setError(''); // Clear error when user types\n    setSuccess(''); // Clear success when user types\n  };\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    setError('');\n    setSuccess('');\n\n    // First, check if instructor\n    try {\n      const instructorRes = await post('http://localhost:5001/api/instructor-login', formData, 'Logging in...');\n      if (instructorRes && instructorRes.isInstructor) {\n        setSuccess('Instructor login successful!');\n        localStorage.setItem('isInstructor', 'true');\n        localStorage.setItem('isLoggedIn', 'true');\n        localStorage.setItem('instructorEmail', formData.email); // Save instructor email\n        localStorage.setItem('userEmail', formData.email); // Save user email for booking\n        localStorage.setItem('userId', instructorRes.instructorId); // Store instructorId as userId for slot page\n        setTimeout(() => navigate('/slots'), 1500);\n        return;\n      }\n    } catch (err) {\n      // Not an instructor, continue to user/admin login\n    }\n\n    try {\n      const data = await post('http://localhost:5001/api/login', formData, 'Logging in...');\n      localStorage.setItem('userId', data.userId); // Store userId for booking\n      const normalizedPackage = (data.package || \"free\").toLowerCase().replace(\" plan\", \"\").trim();\n      localStorage.setItem(\"package\", normalizedPackage);\n      if (formData.email === \"admin1234@gmail.com\" && formData.password === \"admin1234\") {\n        setSuccess(\"Admin login successful!\");\n        localStorage.setItem(\"isAdmin\", \"true\");\n        localStorage.setItem(\"isLoggedIn\", \"true\");\n        localStorage.setItem('userEmail', formData.email); // Save user email for booking\n        setTimeout(() => navigate('/Articles'), 1500);\n      } else {\n        localStorage.setItem(\"isAdmin\", \"false\");\n        localStorage.setItem(\"isLoggedIn\", \"true\");\n        setSuccess('Login successful!');\n        localStorage.setItem('userEmail', formData.email); // Save user email for booking\n        setTimeout(() => navigate('/'), 1500);\n      }\n    } catch (err) {\n      console.error(err);\n      setError(err.message || 'Error logging in.');\n    }\n  };\n\n  return (\n    <>\n      <div id=\"upperheader\">\n        <Header />\n        <div id=\"uuy\">\n          <form id=\"form\" onSubmit={handleLogin}>\n          <h2>{t(\"login.title\")}</h2>\n            {error && <div style={{ color: 'red', marginBottom: '10px', textAlign: 'center' }}>{error}</div>}\n            {success && <div style={{ color: 'green', marginBottom: '10px', textAlign: 'center' }}>{success}</div>}\n            <div id=\"ineerf\">\n            <span>{t(\"login.email\")} :</span>\n              <input type=\"email\" name=\"email\" value={formData.email} onChange={handleChange} required />\n            </div>\n            <div id=\"ineerf\">\n            <span>{t(\"login.password\")} :</span>\n              <input type=\"password\" name=\"password\" value={formData.password} onChange={handleChange} required />\n            </div>\n            <button type=\"submit\">{t(\"login.submit\")}</button>\n          </form>\n        </div>\n      </div>\n      <Footer2/>\n    </>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}